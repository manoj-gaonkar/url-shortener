<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>URLshortener</title>
</head>
<body>
    <div class="w-screen h-screen flex flex-col justify-center items-center ">
        <div class="w-3/4 md:w-2/4 lg:w-1/4  p-6 shadow-lg  rounded ">
            <form action="" method="post" onsubmit="console.log("okdub");" >
                {% csrf_token %}
                <label class=" block text-gray-700 font-bold py-10 text-center text-2xl">URL SHORTENER</label>
                <input placeholder="enter the long url" type="text"
                    class="px-5 py-2 outline-none rounded w-full bg-gray-50 " name="longurl" value="{{ valuepost }}">
                <input type="submit" class="px-3 py-2 mt-5 rounded-md bg-gray-200">
            </form>
    
        </div>
        {% if shorturl %}
        <div class="w-3/4 md:w-2/4 lg:w-1/4 flex mt-16">
            <input type="text" class="bg-gray-50 p-4 w-full h-12 mr-2 rounded" value="{{ shorturl }}" disabled id="copytext">
            <button class="w-1/3 bg-red-200 rounded outline-none" onclick="copytoclipboard();">Copy</button>
        </div>
        {% endif %}
    </div>

    <div class="px-3 py-2 absolute bottom-20 left-2/4 translate-x-[-50%] bg-[rgba(51,250,0,0.3)] rounded hidden" id='copiednotif'>
      copied to clipboard
    </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
    integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    $('form').on('submit',function(){
        console.log("ok");
        window.location.href('/');
    })

    function copytoclipboard(){
        copytext = document.getElementById('copytext');
        copytext.select();
        copytext.setSelectionRange(0,10000);
        navigator.clipboard.writeText(copytext.value);
        console.log("find");
        $('#copiednotif').fadeToggle('hidden');
        setTimeout(function(){
            $('#copiednotif').fadeToggle('hidden');
        },1000)
    }
    
</script>
</html>